---
layout: post
title: "Solr5.x &&SolrCloud"
keywords: ["distributed","Search"]
description: "Solr5.x &&SolrCloud"
category: "distributed"
tags: ["distributed","Search"]
---
Solr5 相比Solr4或更低版本，最大的Difference就是不依赖于其他Serlet容器了。不再需要部署war到Jetty或者Tomcat了。酸爽！

单独的服务进程。算是开包装即用，离ES又近了一步！

[通过zkcli.sh更新配置](https://cwiki.apache.org/confluence/display/solr/Command+Line+Utilities)

[Lucene5.x-ReleaseNote](https://wiki.apache.org/lucene-java/ReleaseNote50)

[Solr5.0-ReleaseNote](http://wiki.apache.org/solr/ReleaseNote50)
 
[Collections API](https://cwiki.apache.org/confluence/display/solr/Collections+API)
 
删除一个collection,collection名字+action=DELETE

```
http://host:port/solr/admin/collections?action=DELETE&name=game
```

reload

```
http://localhost:8983/solr/admin/collections?action=RELOAD&name=game
```

用collection用zkCli.sh比较方便,其中/data/solr/game 就是conf文件路径，包括solr.xml,solrconfig.xml,schema.xml等

```
./bin/solr create_collection -c game  -d /data/solr/game -shards 2 -replicationFactor 1
```

启动solrcloud，只需每台执行

```
./bin/solr start -c -m 2g -z zkhost:zkport
```

还有个问题是如果连接的zk串使用chroot,需要bootstrap

```
./server/scripts/cloud-scripts/zkcli.sh -zkhost 127.0.0.1:2181 \
   -cmd bootstrap -solrhome /server/solr
```
